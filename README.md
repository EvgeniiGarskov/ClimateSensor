# 

## Описание проекта
Данный проект представляет собой систему для сбора и анализа метеорологических данных, получаемых с сенсора, который измеряет температуру окружающего воздуха и определяет наличие дождя. В качестве сенсора используется наш компьютер, который будет отправлять данные на серверное приложение, реализованное с помощью Spring REST API.

## Структура проекта

**Проект делится на две основные части:**

1. REST API приложение: Серверная часть, реализованная с использованием Spring, которая принимает данные от "сенсора" и сохраняет их в базе данных для дальнейшего анализа.
2. Java клиент: Клиентская часть, которая использует RestTemplate для отправки HTTP-запросов к REST API приложению, имитируя работу сенсора.

## Установка и запуск в IntelliJ IDEA
1. **Клонируйте репозиторий:**
    - Клонируйте репозиторий: git clone https://github.com/EvgeniiGarskov/DigitLib.git
  
2. **Откройте проект в IntelliJ IDEA:**
    - Запустите IntelliJ IDEA.
    - Выберите "Open" (Открыть) и укажите путь к папке, в которую вы клонировали репозиторий.
  
3. **Импортируйте проект как Maven:**
    - В панели проекта (Project) найдите файл pom.xml, нажмите на него правой кнопкой мыши и выберите Maven > Reload Project для загрузки всех необходимых зависимостей.
    - Дождитесь завершения импорта зависимостей.
  
4. **Создание базы данных:**
    - В данном проекте используется СУБД PostgreSQL. Код для создания таблиц находится в файле ClimateSensorAPI/src/main/sql/climate_sensor_app_db.sql.

5. **Запустите приложение REST API в IntelliJ IDEA, следуя указанному пути:**
   - ClimateSensorAPI/src/main/java/ru/garskov/springcourse/ClimateSensorAPI/ClimateSensorApiApplication.java
  
6. **Перейдите в директорию с Java-клиентом и запустите класс:**
   -ClimateSensorClient/src/main/java/ru/garskov/springcourse/App.java
   
Клиент начнет отправлять данные на REST API приложение.

## Использование

**REST API предоставляет следующие конечные точки:**

1. **Регистрация сенсора:**
    POST /sensors/registration
    Регистрация нового сенсора.
    Пример запроса:
    {
        "name": "Sensor 1"
    }

2. **Добавление измерения от сенсора:**
    POST /measurements/add
    Добавление нового измерения. В теле запроса необходимо указать температуру, информацию о дожде и зарегистрированный сенсор.
    Пример запроса:
    {
        "value": 24.7,
        "raining": false,
        "sensor": {
            "name": "Sensor 1"
        }
    }

3. **Получение всех измерений:**
    GET /measurements
    Получение списка всех измерений.

4. **Получение количества дождливых дней:**
    GET /measurements/rainyDaysCount
    Получение количества дней с дождем.

**Java клиент использует RestTemplate для выполнения следующих действий:**

1. **Регистрация нового сенсора.**
2. **Отправка 1000 запросов на добавление измерений с случайными температурами и данными о дожде на адрес POST /measurements/add.**
3. **Получение всех измерений с сервера, отправив GET запрос на адрес /measurements.**

## Тестирование

Для тестирования REST API вы можете использовать Postman, чтобы отправлять запросы и проверять ответы.
